<br><br>
<div class="container page-conversation-view">
  <div class="row">
    <div class="col-md-4">
      <ul class="list-group">
        <span ng-if="$ctrl.viewer.before.length > 0">
          <li ng-repeat="block in $ctrl.viewer.before" ng-include="'conversationBlock'" class="list-group-item selectable-message"></li>
          <br><br>
        </span>
        <div class="selected-box">
          <li class="list-group-item selectable-message" ng-click="$ctrl.setActive($ctrl.viewer.active.stepId); $ctrl.edit($ctrl.viewer.active.stepId)">
            <div class="message-container message-app" ng-repeat="message in $ctrl.step[$ctrl.viewer.active.stepId].messages" >
              {{ message }}
            </div>
          </li>
          <li class="list-group-item selectable-message" ng-if="$ctrl.viewer.active.pathId" ng-click="$ctrl.setActive($ctrl.viewer.active.stepId, $ctrl.viewer.active.pathId); $ctrl.edit($ctrl.viewer.active.stepId, $ctrl.viewer.active.pathId)">
            <div class="message-container message-user">
              <span class="label label-default">
                {{$ctrl.step[$ctrl.viewer.active.stepId].path[$ctrl.viewer.active.pathId].patterns.length}}
              </span>
              &nbsp;&nbsp;&nbsp;
                {{ $ctrl.step[$ctrl.viewer.active.stepId].path[$ctrl.viewer.active.pathId].patterns[0].phrases[0] }}
            </div>
            <div class="message-container message-app" ng-repeat="message in $ctrl.step[$ctrl.viewer.active.stepId].path[$ctrl.viewer.active.pathId].patterns[0].messages">
              {{ message }}
            </div>
          </li>
        </div>
        <br><br>
        <li ng-if="$ctrl.viewer.after.length > 0" ng-repeat="block in $ctrl.viewer.after" ng-include="'conversationBlock'" class="list-group-item">
        </li>
      </ul>
    </div>
    <div class="col-md-8">
      <div ng-if="$ctrl.editing.s && !$ctrl.editing.p">
        Messages:
        Retries: 3<br>
        <br><br>

      </div>
      <div ng-if="$ctrl.editing.s && $ctrl.editing.p">
        Pattern Type: {{$ctrl.step[$ctrl.viewer.active.stepId].path[$ctrl.viewer.active.pathId].patterns[0].type}}<br>
        Next: {{$ctrl.step[$ctrl.viewer.active.stepId].path[$ctrl.viewer.active.pathId].next}}: {{$ctrl.step[$ctrl.viewer.active.stepId].path[$ctrl.viewer.active.pathId].stepId}}<br>
        <br><br>
        Reaction Messages:
      </div>
    </div>
  </div>
</div>

<script type="text/ng-template" id="conversationBlock">
  <div class="message-container message-app selectable-message" ng-repeat="message in $ctrl.step[block.stepId].messages" ng-click="$ctrl.setActive(block.stepId)">
    {{ message }}
  </div>
  <div class="selectable-message" ng-if="$ctrl.step[block.stepId].path[block.pathId]" ng-click="$ctrl.setActive(block.stepId, block.pathId)">
    <div class="message-container message-user">
      {{ $ctrl.step[block.stepId].path[block.pathId].patterns[0].phrases[0] }}
    </div>
    <div class="message-container message-app" ng-repeat="message in $ctrl.step[block.stepId].path[block.pathId].patterns[0].messages">
      {{ message }}
    </div>
  </div>
</script>

<!--
<h3>{{$ctrl.script.steps[$ctrl.activeStep].messages[0]}}</h3>
Max retries: <input><br>
Retry messages:
<ul><li>Didn't understand...</li></ul>
Confirm: <input type="checkbox"/><br>
Confirm messages:
<ul><li>You're sure it's ____...</li></ul>
<h3>Responses</h3>
<input />
<ul class="list-group">
  <li ng-repeat="response in $ctrl.script.steps[$ctrl.activeStep].responses" class="list-group-item selectable-message" ng-click="$ctrl.activeSubstep = $index">
    check if accepted, cycle sumbol if retry, hand stop if end, down arrow if passthrough {{response | responseShortname}}
  </li>
</ul>
Response data:<br>
min/max for number<br>
matching phrases for phrases<br>
entity for entity matching<br>-->
