<navbar-manage></navbar-manage>
<div class="background-tint">
  <div class="header-unit header-secondary">
    <div class="container">
      <div class="header-bottom-align">
        Program
        <h2>{{$ctrl.program.name}}</h2>
      </div>
      <div class="header-bottom-align">
        <button class="btn btn-md btn-primary pull-right" ng-disabled="$ctrl.isPristine" ng-click="$ctrl.save()">Save</button>
      </div>
    </div>
  </div>
  <div class="container page-program-view">
    <div class="row">
      <div class="col-md-8">
        <textarea class="form-control" placeholder="Add description here..."></textarea>
        <br>
        <!--[insert timeline here from wait and repeat]
      <br><br>-->
        <div class="panel panel-default">
          <div class="panel-body">
            <button class="btn btn-sm btn-default pull-right"><i class="fa fa-plus"></i>&nbsp;Add</button>
            <br>
            <h4>Protocols</h4>
            <div class="page-divider"></div>
            <br>
            <strong>Wait</strong>
            <br>
            <div class="row" ng-repeat="protocol in $ctrl.program.protocols | filter:{trigger:{type:'wait'}}">
              <br>
              <div class="col-md-2">
                <span class="label label-default">{{protocol.trigger.params.duration}} {{protocol.trigger.params.durationUnit}}</span>
              </div>
              <div class="col-md-10">
                <a ui-sref="task-view({id: task._id})">{{protocol.task.name}}</a>
                <p style="font-size: 0.8em">{{protocol.task.description}}</p>
              </div>
            </div>
            <br>
            <br>
            <strong>Repeat</strong>
            <br>
            <div class="row" ng-repeat="protocol in $ctrl.program.protocols | filter:{trigger:{type:'repeat'}}">
              <br>
              <div class="col-md-2">
                <span class="label label-default">Every {{protocol.trigger.params.duration}} {{protocol.trigger.params.durationUnit}}</span> &nbsp;
              </div>
              <div class="col-md-10">
                <a ui-sref="task-view({id: protocol.task._id})">{{protocol.task.name}}</a>
                <p style="font-size: 0.8em">{{protocol.task.description}}</p>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-md-4">
        <div class="panel panel-default">
          <div class="panel-body">
            <strong>Add Patient</strong>
            <br>
            <input disabled class="form-control">
            <br>
            <br>
            <strong>Overview</strong>
            <br>Patients Enrolled:
            <br>Average Completion Rate:
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
